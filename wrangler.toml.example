name = "study-with-miku"
main = "workers/index.js"
compatibility_date = "2023-10-01"

assets = { directory = "./dist", binding = "ASSETS" }

[[durable_objects.bindings]]
name = "ONLINE_COUNTER"
class_name = "OnlineCounter"

[[durable_objects.bindings]]
name = "AUTH_CHALLENGE"
class_name = "AuthChallenge"

[[migrations]]
tag = "v1"
new_sqlite_classes = ["OnlineCounter"]

[[durable_objects.bindings]]
name = "RATE_LIMITER"
class_name = "RateLimiter"

[[migrations]]
tag = "v2"
new_classes = ["AuthChallenge"]

[[migrations]]
tag = "v3"
new_classes = ["RateLimiter"]

# D1 数据库
[[d1_databases]]
binding = "DB"
database_name = "study-with-miku-db"
database_id = "placeholder"

# 环境变量 (可选，会自动从请求 URL 检测)
# 如果需要覆盖自动检测，可以取消注释以下配置：
# [vars]
# WEBAUTHN_RP_ID = "study-with-miku.pages.dev"
# WEBAUTHN_RP_NAME = "Study with Miku"
# OAUTH_CALLBACK_BASE = "https://study-with-miku.pages.dev"
